<?php include '../navbar.php'; ?>
<?php include 'admin_auth.php'; include __DIR__ . '/../db.php'; $id=intval($_GET['id']??0); if(!$id) header('Location: manage_patients.php'); $stmt=$conn->prepare('SELECT * FROM patients WHERE id=?'); $stmt->bind_param('i',$id); $stmt->execute(); $patient=$stmt->get_result()->fetch_assoc(); $msg=''; if($_SERVER['REQUEST_METHOD']==='POST'){ $name=$_POST['name']; $email=$_POST['email']; $contact=$_POST['contact']; $address=$_POST['address']; $u=$conn->prepare('UPDATE patients SET name=?,email=?,contact=?,address=? WHERE id=?'); $u->bind_param('ssssi',$name,$email,$contact,$address,$id); if($u->execute()) header('Location: manage_patients.php'); else $msg='Error: '.$u->error; } ?>
<!doctype html><html><head><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<meta charset="utf-8"><title>Edit Patient</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">    <link rel="stylesheet" href="/clinic/styles.css">
</head><body><div class="container py-4"><a href="manage_patients.php">&laquo; Back</a><h3 class="mt-2">Edit Patient</h3><?php if($msg) echo "<div class='alert alert-danger'>$msg</div>"; ?><form method="post" class="mt-3"><div class="mb-2"><input name="name" class="form-control" value="<?php echo htmlspecialchars($patient['name']);?>" required></div><div class="mb-2"><input name="email' class='form-control' value="<?php echo htmlspecialchars($patient['email']);?>" required></div><div class="mb-2"><input name="contact" class="form-control" value="<?php echo htmlspecialchars($patient['contact']);?>"></div><div class="mb-2"><textarea name="address" class="form-control"><?php echo htmlspecialchars($patient['address']);?></textarea></div><button class="btn btn-primary">Save</button></form></div></body></html>
